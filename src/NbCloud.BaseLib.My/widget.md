# 我的组件聚合方案说明

## 关键概念

- 容器持有者（筐）
- 数据提供者（物品）
- 视图展示逻辑（筐内物品码放的规则）

## 设计原则

- 容器由持有者（例如空间）定义
- 数据由提供者（例如模块）提供
- 视图展示逻辑和数据逻辑分离：
    - 视图模型定义（例如由空间定义VO格式）
    - 视图模型数据提供（例如由模块负责提供或转换数据为合适的模型定义）
    - 视图渲染控制（例如由空间负责控制展示逻辑）

## 例子

空间聚合页：

- 空间定义页面布局
- 空间定义组件分类和视图模型格式
- 空间实现渲染（控制和显示）
- 模块或中间库提供数据（按功能需求不同，决定是否设计独立的第三方库）
    - 常用操作菜单（由模块提供）
    - 我的工作安排（由活动库接口提供，但数据状态来源于模块）

- 按时间筛选、排序、分页（加载更多）、后期的再加工、统计等，由活动库接口提供
- 简单的跳转菜单，直接由模块提供


## 概念模型

- 组件视图模型提供： IMyWidgetProvider
- 组件视图模型服务： IMyWidgetProviderService
- 上下文: IMyWidgetContext

其中：

- 模块 -> impl IMyWidgetProvider
- 页面布局 -> use IMyWidgetProviderService
- IMyWidgetProvider, IMyWidgetProviderService -> use IMyWidgetContext

## 技术实现方式的选择考虑因素

是否需要中间库？
- 是否需要复杂的查询逻辑？例如按模糊搜索、时间筛选、排序、分页（加载更多）等
- 是否需要二次加工处理? 例如：数据再处理、统计汇总等
- 是否具有数据差异性？例如：我的工作安排里，是否都是活动相关的数据？
- 数据实时性和计算代价的考量？例如：某些状态的更新或数据的汇总，是否需要对中间结果进行缓存处理（我的常用操作？）
- 通用性和使用理解简单的权衡？例如：数据交换是基于公共接口调用还是事件通知